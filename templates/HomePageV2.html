{# New Home Page #}

{#{% from '_formhelpers.html' import render_field %} {# import neede for chard range forms #}

{% extends 'layout.html' %} {# inherits format from layout.html #}

{% block title %} {# Overides layout.html default title #}
    <title>System Monitoring Tool</title> {# Title - shown in tab on browser #}
    <link rel="icon" href="/static/favicons/home.ico">
{% endblock title %}

{% block content %} {# Overides layout.html body section #}

    <a class="text-decoration-none" href="{{ url_for('home') }}">
        <div class="row mt-3 text-center"> {# Row for page header #}
            <div class="col-12 ml-auto p-3 mb-2 bg-secondary text-white">
                <h1>Server System Monitoring Tool</h1>
            </div>
        </div>
    </a>

    <div class="row mt-3 text-center"> {# Row for Master list button and dropdown #}
        <div class="col-2 text-left"> {# master list button #}
            <a class="btn btn-secondary btn-lg" href="/masterlist" role="button"><i class="fas fa-list"></i> Master List</a>
        </div>
        <div class="col-10 text-right"> {# dropdown for filter | filter does not work #}
            <form method="post">
                <a>{{ form.csrf_token }}
                    {{ form.filter }}</a>
                <button type="submit" class="btn btn-secondary" name="form.sub">Filter</button>
                <a class="btn btn-secondary" href={{ url_for('home') }} role="button">Reset</a>

            </form>
        </div>
    </div>

    {# Racks == Cards #}
    <div class="testimonial-group mt-3 mb-3">
        <div class="row p-5">
            {% for rack in rack %}
                <div class="col-3 text-center testimonial-group--box"> {# formats cards into special columns #}
                    <div class="card"> {# card containing a rack #}
                        <div class="card-header text-center p-3 bg-primary text-white"> {# card header #}
                            {{ rack.Name }}
                        </div>
                        <div class="list-group list-group-flush"> {# lists servers that link to their Real Time page #}

                            {% for server in server %}
                                {% if server.RackId == rack.RackId and server.ServerId in masterList %}
                                    {# grabs all servers in DB#}
                                    <a href="/real-time-data-overview/{{ server.ServerId }}"
                                       data-toggle="tooltip" data-placement="right" data-html="true"
                                       title="{{ metric[server.ServerId] }}"
                                       class="list-group-item list-group-item-action list-group-item-{{ color[server.ServerId]['ServerColor'] }} text-center">
                                        {{ server.ServerName }}
                                        <i class="fas fa-{{ color[server.ServerId]['ServerIcon'] }} float-right"></i>
                                    </a>

                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock content %}
